<!DOCTYPE html>
<html>

<head>
  <title>Sent2Vec</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <link rel="stylesheet" href="style.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>
  $(document).ajaxStart(function() {
    $(".loader").show();
  });
  $(document).ajaxStop(function() {
    $(".loader").hide();
  });
  $(document).ready(function(){
    // On clicking "Query" button, make POST to /query with query sentence
    $("#submit-query").click(function(){
      if (!$("#input-text").val()) {
        alert("Index some text first.");
        $("#input-text").focus();
      } else {
        $.post("query",
               { query: $("#input-query").val() },
               function(data, status) {
                 obj = JSON.parse(data);
                 html = '<ol id="result-list">'
                 for (var i = 0; i < obj.length; i++) {
                    html += "<li>" + obj[i].sentence + " [" + obj[i].distance + "]</li>";
                 }
                 html += "</ol>";
                 $("#output-result").html(html);
                 $("#output-result").show();
               });
      }
    });
    // On clicking "Index" button, make POST to /index with text
    $("#submit-text").click(function(){
      $("#output-result").text("");
      $("#output-result").hide();
      $.post("index",
      { text: $("#input-text").val() },
      function(data, status){
        // foo
      });
    });
  });
  </script>

</head>

<body>

  <main>

    <h1>Sent2Vec</h1>

    <div class="loader"></div>

    <div id="div-query">
      Enter query sentence:<br />
      <input id="input-query" type="text" name="query">
      <button id="submit-query">Query</button>
    </div>

    <div id="div-result">
      Result:<br />
      <div id="output-result"></div>
    </div>

    <div id="div-text">
      Enter text to index:<br />
      <button id="submit-text">Index</button>
      <textarea id="input-text"></textarea>
    </div>

  </main>

</body>

</html>
